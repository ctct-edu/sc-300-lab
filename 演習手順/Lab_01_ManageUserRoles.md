---
lab:
    title: '01 - ユーザー ロールを管理する'
    learning path: '01'
    module: 'モジュール 01 – ID 管理ソリューションを実装する'
---

# ラボ 01: ユーザー ロールを管理する

## ラボ シナリオ

あなたの会社では最近、アプリケーション管理者として業務を遂行する新しい従業員を採用しました。新しいユーザーを作成し、セキュリティ ロールを割り当てる必要があります。

#### 推定時間: 10 分

## 演習 1 - 新しいユーザーを作成し、アプリケーションの管理者権限をテストする

### タスク 1 - 新しいユーザーを追加する

1. [https://portal.azure.com](https://portal.azure.com) にグローバル管理者としてサインインします。

2. **「Azure Active Directory」** を検索して選択します。

3. 左側のナビゲーション メニューの **「管理」** で、**「ユーザー」 > 「+ 新しいユーザー」** を選択します。

4. 「ユーザーの作成」が選択されていることを確認します。  次の情報を使用してユーザーを作成します。

    | **設定**| **値**|
    | :--- | :--- |
    | ユーザー名| ChrisG|
    | 名前| Chris Green|
    | 名| Chris|
    | 姓| Green|

5. 「**自分でパスワードを作成する**」をマークします

6. パスワード = **Pass@word1**

     *このアカウントに最初にログインするときにパスワードを変更する必要があります*

7. 「**作成**」を選択します。これでユーザーが作成され、組織に登録されました。

### タスク 2 - ログインしてアプリを作成する

1. 新しい InPrivate ブラウザー ウィンドウを開きます。(ChromeやFire Foxの場合は""シークレットウィンドウ""です。)
2. Azure portal ([https://portal.azure.com](https://portal.azure.com)) を開き、先に作成した「Chris Green 」でサインインします。

    | **設定**| **値**|
    | :--- | :--- |
    | ユーザー名| `ChrisG@ctcXXXXoutlook.onmicrosoft.com`　(例:`ChrisG@ctc0000outlook.onmicrosoft.com`) |
    | パスワード| Pass@word1|

3. パスワードを更新します。

    | **設定**| **値**|
    | :--- | :--- |
    | 現在のパスワード| Pass@word1|
    | 新しいパスワード| Pa$$w.rd1234|
    | パスワードの確認| Pa$$w.rd1234|

4. 「**Microsoft Azure ツアーへようこそ**」ダイアログが表示された場合は、「**後で**」ボタンをクリックします。

5. 画面上部の検索ダイアログで「**エンタープライズ アプリケーション**」を検索して選択します。
6. 権限がないため「**アクセス権なし**」と表示されます。
7. 右上隅にある **ChrisG** の名前をクリックして、サイン アウトします。

## 演習 2 - アプリケーション管理者のロールを割り当て、アプリを作成する

### タスク 1 - ユーザーにロールを割り当てる

Azure Active Directory (Azure AD) を使用して、特権が低いロールで ID のタスクを管理する限定された管理者を指定できます。ユーザーの追加または変更、管理ロールの割り当て、ユーザーのパスワードのリセット、ユーザーのライセンスの管理、ドメイン名の管理などの目的で管理者を割り当てることができます。

1. グローバル管理者のロールとしてまだログインしていない場合は、Azure portal を開いてログインします。
2. 「Azure Active Directory」ブレードに移動します。
3. メニューの「管理」セクションで「**ユーザー**」をクリックします。
4. **Chris Green** のアカウントをクリックします。
5. 「管理」セクションから「**割り当てられたロール**」を選択します。
6. 「**+ 割り当ての追加**」をクリックして、**アプリケーション管理者** のロールをマークします。
7. 「**追加**」をクリックします。

    ![「割り当てられたロール」ページ - 選択されたロールを表示中](./media/directory-role-select-role.png)

8. 「**更新**」ボタンをクリックします。(反映に時間がかかります。何回か更新してください。)

     ##### 新しく割り当てられたアプリケーション管理者ロールが、ユーザーの **「割り当てられたロール」** ページに表示されます。

### タスク 2 - アプリケーションのアクセス許可を確認する

1. 新しい InPrivate ブラウザー ウィンドウを開きます。

2. Chris Green として、Azure portal ([https://portal.azure.com](https://portal.azure.com)) を開きます。

    | **設定**| **値**|
    | :--- | :--- |
    | ユーザー名| `ChrisG@ctcXXXXoutlook.onmicrosoft.com`　(例:`ChrisG@ctc0000outlook.onmicrosoft.com`) |
    | パスワード| Pa$$w.rd1234|

3. 「**Microsoft Azure ツアーへようこそ**」ダイアログが表示された場合は、「**後で**」ボタンをクリックします。

4. 画面上部の検索ダイアログで「**エンタープライズ アプリケーション**」を検索して選択します。

6. 「**+ 新しいアプリケーション**」をクリックします。

6. 色々なアプリケーションが表示されたことを確認してください。

     （ここでは、アプリケーションの登録は行いません。表示されるかだけ確認してください。)

7. Azure portal の Chris Green のインスタンスからサインアウトし、ブラウザーを閉じます。

## 演習 3 - ロールの割り当てを削除する

### タスク 1 - Chris Green からアプリケーション管理者を削除する

このタスクでは、別の方法を使用して、割り当てられたロールを削除します。 Azure AD の「**ロールと管理者**」オプションを使用します。

1. [https://portal.azure.com](https://portal.azure.com) にグローバル管理者としてサインインします。
2. 検索ボックスに「**Azure Active Directory**」と入力し、Azure AD を起動します。
3. 左側のナビゲーション メニューの **「管理」** で「**ロールと管理者**」を選択し、一覧から **アプリケーション管理者** のロール選択します。

4. 「**アプリケーション管理者 | の割り当て**」ページに、Chris Green の名前が表示されます。
5. Chris Green の横にあるボックスにチェックを入れます。
6. ダイアログの上部にあるオプションから「**X 割り当ての削除**」をクリックします。
7. 確認ボックスが開いたら、「**はい**」と答えます。
8. 「Azure Active Directory」を閉じます。

## ユーザーの管理を試す

Azure AD ブレードを使用して、ユーザーを追加および削除できます。  ただし、スクリプトを使用してユーザーを作成し、ロールを割り当てることができます。  スクリプトを使用して、Chris Green のユーザー アカウントに別のロールを与えてみます。
