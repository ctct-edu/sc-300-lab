---
lab:
    title: '23 - アプリケーションに対してテナント全体の管理者の同意を付与する'
    learning path: '03'
    module: 'モジュール 03 - アプリの登録を実装する'
---

# ラボ 23: アプリケーションに対してテナント全体の管理者の同意を付与する

## ラボ シナリオ

組織で開発したアプリケーション、または Azure AD テナントに直接登録されているアプリケーションの場合は、Azure portal の「アプリの登録」から、テナント全体の管理者の同意を付与できます。

#### 推定時間: 10 分

## アプリの登録で管理者の同意を付与する

> **警告**
> テナント全体の管理者の同意をアプリケーションに付与すると、アプリおよびアプリの発行者に、組織のデータへのアクセスが許可されます。同意を付与する前に、アプリケーションで要求されているアクセス許可をよく確認してください。

Microsoft Graph API にアプリケーション許可のための管理者の同意を与えるには、グローバル管理者ロールが必要です。

1. 前の演習では、「Demo App」という名前のアプリを作成しました。必要に応じて、Microsoft Azure で **「Azure Active Directory」 > 「アプリの登録」 > 「Demo App」** を参照します。

1. **「Demo App」** ブレードで、各 **アプリケーション (クライアント) ID** と **ディレクトリ (テナント) ID** の値を見つけて、後で使用できるようにコピーして保存します。

    ![ディレクトリ ID が強調表示されている「デモ アプリ」ブレードを示す画面イメージ](./media/lp3-mod3-demo-app-directory-id.png)

1. 左側のナビゲーションの **「管理」** で、**「API のアクセス許可」** を選択します。

1. **「構成されたアクセス許可」** で、**「Contoso マーケティングに管理者の同意を与えます」** を選択します。（この作業は、前のステップで既に実行済みです）

    ![Contoso に対する「管理者の同意の付与」が強調表示されている API のアクセス許可ページを示す画面イメージ](./media/lp3-mod3-api-permissions-admin-consent.png)

1. ダイアログ ボックスを確認してから、**「はい」** を選択します。

    > **警告**
    > アプリの登録経由でテナント全体に管理者の同意を与えると、以前にテナント全体に与えられていたアクセス許可が取り消されます。以前にユーザーが自分で付与したアクセス許可は影響を受けません。

## エンタープライズ アプリで管理者の同意を付与する

テナントでアプリケーションが既にプロビジョニングされている場合、エンタープライズ アプリケーションを通じて、テナント全体の管理者の同意を付与できます。

1. Microsoft Azure で、**「Azure Active Directory」 > 「エンタープライズ アプリケーション」 > 「Demo App」** を参照します。

1. **「デモ アプリ」** ブレードの左側のナビゲーションで、**「セキュリティ」** の下にある **「アクセス許可」** を選択します。

1. **「アクセス許可」** で **「Contoso マーケティングに管理者の同意を与えます」** を選択します。

    ![Contoso に対する「管理者の同意の付与」が強調表示されているデモ アプリのアクセス許可ページを示す画面イメージ](./media/lp3-mod3-grant-admin-consent-in-enterprise-app.png)

    > **警告**
    > アプリの登録経由でテナント全体に管理者の同意を与えると、以前にテナント全体に与えられていたアクセス許可が取り消されます。以前にユーザーが自分で付与したアクセス許可は影響を受けません。

1. プロンプトが表示されたら、グローバル管理者アカウントを使用してサインインします。

1. **「Permissions requested」** ダイアログボックスで情報を確認し、**「同意する」** を選択します。
